function closeModal(){$(".st-Modal").removeClass("is-open")}function deleteItem(t,s){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:"/deleteItem",dataType:"json",data:s}).done(function(t,s,e){}).fail(function(t,s,e){})}$(document).ready(function(){$("pre code").each(function(t,s){$(this).before('<button class="code-copy-btn" title="Copy">Copy</button>')})}),$(document).on("click",".css-1kbv4lt",function(){$(".css-ty7eka").hide(),$(".css-18fgn0k").hide(),$(".co-Item_text").show(),$(".css-1w8dyws").css("background-color","rgb(223, 224, 224)"),$(".css-1kbv4lt").css("background-color","rgb(255, 255, 255)"),$(".co-Item_text").focus()}),$(document).on("click",".css-1w8dyws",function(){$(".css-ty7eka").show(),$(".css-18fgn0k").show(),$(".co-Item_text").hide(),$(".css-1w8dyws").css("background-color","rgb(255, 255, 255)"),$(".css-1kbv4lt").css("background-color","rgb(223, 224, 224)")}),$(document).on("click","button.css-qgrf2v",function(){window.location.href.indexOf("posts")>-1?db="/postComment":db="/answearQuestion",_action=$(this).attr("data-action");let t=$(this).closest("section.css-1q0wz2m");"create"==_action?(_editor=$("textarea[name='new']").val(),content=$("textarea[name='new']").next(".co-Item_text").children(":first-child").html()):"update"==_action&&(_editor=$("textarea[name='update']").val(),content=$("textarea[name='update']").next(".co-Item_text").children(":first-child").html()),""==_editor&&alert("Xin hãy nhập Nội dung cần đăng");var s={content:content,editor:_editor,item_id:$(this).attr("data-itemId"),caId:$(this).attr("data-caId"),action:_action};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:db,dataType:"json",data:s}).done(function(s,e,a){let c=new Date(s.comment.created_at);var n=("0"+c.getHours()).slice(-2),o=("0"+c.getMinutes()).slice(-2);let i=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" "+n+":"+o;"/postComment"==db?link_text=window.location.host+'"/'+s.user_name+"/posts/"+s.comment.item+"#comment-"+s.comment.id+'"':link_text=window.location.host+'"/'+s.user_name+"/questions/"+s.comment.item+"#answear-"+s.comment.id+'"',sub1='<section class="css-1q0wz2m">',tmpHtml='<div class="css-vdedeo"><div class="css-70qvj9"><a href="/'+s.user_name+' " class="css-q2y3yl"><img loading="lazy" onerror="this.src = \'https://secure.gravatar.com/avatar/c2df0d82abc13bc84a3bb4eb7e5386d1\';"  src="/storage/'+s.profile_photo_path+'" alt="'+s.user_name+'" class="css-5wkws1"></a><a href="/'+s.user_name+'" class="css-q2y3yl"> @'+s.user_name+'</a></div><div class="css-70qvj9"><time class="css-7m9bsf">'+i+'</time><div class="css-dfpqc0"><span class="css-p9qzma"><span class="fa fa-ellipsis-h"></span></span><div class="css-u4hpc5"><div class="css-1mcn277" data-link="'+link_text+'">Copy link</div><div class="css-1mcn277 edit" data-caId="'+s.comment.id+'">Sửa bình luận</div><div class="css-1mcn277 delete" data-caid="'+s.comment.id+'">Xóa bình luận</div></div></div></div></div><div>'+s.comment.content+'</div><div class="css-ebwgjf"><div class="css-1duml6f"><input type="checkbox" data-atId="'+s.comment.user_id+'" data-comid="'+s.comment.id+'" data-itemId="',s.comment.post_id?tmpHtml+=s.comment.post_id:tmpHtml+=s.comment.question_id,tmpHtml+='" data-type="2" class="css-1drc635" style="border:none !important; background: none !important; display: none;"><img class="likecomment" src="/images/utils/like.svg" alt="profile Pic" height="40" width="40" style="cursor:pointer"></div><div class="co-Item_likeLabel">0</div>',sub2="</div>","create"==_action?($("#comment_block").val(""),$("#comment_content").html(""),$(".css-1gbpb5n").length?($(sub1+tmpHtml+sub2).insertAfter($(".css-1gbpb5n")),$(".css-1gbpb5n").remove()):$(sub1+tmpHtml+sub2).insertAfter($(".css-1q0wz2m:last"))):"update"==_action&&t.html(tmpHtml)}).fail(function(t,s,e){})}),$(document).on("click",".css-tubf1g button",function(t){t.stopPropagation(),$(this).hasClass("authbtn")||$("#stockmodel .st-Modal").addClass("is-open")}),$(document).on("click","span.css-catname",function(t){$(this).hasClass("stockcheck")?$(this).removeClass("stockcheck"):($("span.css-catname").each(function(t,s){$(s).removeClass("stockcheck")}),$(this).addClass("stockcheck")),$(".css-b1sfia").removeAttr("disabled")}),$(document).on("click","button.css-1mteic8 .css-6ozust",function(){$(".css-b1sfia").prop("disabled",!0),$(".css-19midj6").empty(),tmpHtml='<div class="css-1gykiw6">Chọn thư mục gốc</div><select class="css-8osbga"><option value="--">--</option>',$("span.mainfolder").each(function(t,s){tmpHtml+='<option value="'+s.innerHTML+'">'+s.innerHTML+"</option>"}),tmpHtml+='</select><div class="css-1gykiw6">Tên thư mục</div><input type="text" placeholder="Nhập tên thư mục mới" class="css-8osbga addfolder"><button class="css-1ha05ki e1rb7ucl0" disabled font-size="14">Tạo thư mục</button>',$(".css-19midj6").append(tmpHtml)}),$(document).on("keyup",".css-8osbga",function(t){$(".css-8osbga").val().length>0&&$(".css-1ha05ki").removeAttr("disabled")}),$(document).on("click","button.css-1ha05ki",function(){var t={main_category:$(".css-8osbga option:selected").val(),category_name:$(".addfolder").val()};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:"/createCategory",dataType:"json",data:t}).done(function(t,s,e){$new=t.newCategory,$("span.css-catname").each(function(t,s){$(s).removeClass("stockcheck")}),""==$new[2]?(tmpHtml1='<div class="css-dwc3sl"><span class="fa fa-folder" style="color: orange;"></span><span class="css-catname mainfolder stockcheck" data-cateid="'+$new[0]+'">'+$new[1]+"</span></div>",$(".css-1elw6c9").append(tmpHtml1)):(tmpHtml1='<br>&nbsp&nbsp&nbsp&nbsp <span class="fa fa-folder" style="color: orange;"></span><span class="css-catname subfolder stockcheck" data-cateid="'+$new[0]+":"+$new[2]+'">'+$new[3]+"</span>",$("span.css-catname").each(function(t,s){$(s).html()==$new[1]&&($(this).parent().children(":first-child").removeClass("fa-folder"),$(this).parent().children(":first-child").addClass("fa-folder-open"),$(this).parent().append(tmpHtml1),$(this).parent().last()[0].scrollIntoView(!0))})),$(".css-19midj6").empty(),tmpHtml='<button type="button" class="css-1mteic8"><span class="fa fa-plus fa-fw css-45hdgn"></span><div class="css-6ozust">Tạo thư mục mới</div></button>',$(".css-19midj6").append(tmpHtml),$(".css-b1sfia").removeAttr("disabled")}).fail(function(t,s,e){alert("Thư mục đã tồn tại!")})}),$(document).on("click","button.css-g11wic",function(){$(".st-Modal").removeClass("is-open")}),$(document).on("click","button.css-b1sfia",function(){if(_stockedid="n",_newstockid="n",$("span.css-catname").each(function(t,s){$(s).hasClass("stocked")&&(_stockedid=$(s).attr("data-cateid")),$(s).hasClass("stockcheck")&&(_newstockid=$(s).attr("data-cateid"))}),_stockedid!=_newstockid){var t={stockedid:_stockedid,newstockid:_newstockid,itemId:$(this).attr("data-itemId"),authorID:$(this).attr("data-at")};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:"/stockPost",dataType:"json",data:t}).done(function(t,s,e){$("#stockmodel .st-Modal").removeClass("is-open"),$("span.css-catname").each(function(t,s){$(s).hasClass("stocked")&&$(s).removeClass("stocked"),$(s).hasClass("stockcheck")&&$(s).addClass("stocked")}),_notstock_url="/images/utils/stock.svg",_stock_url="/images/utils/stocked.svg";let a=$("#stockpost"),c=parseInt($(".css-1j1r6a0").html());"delete"==t.stock?(a.attr("src",_notstock_url),$("#stockpost").css("width","20px"),$(".css-1drc635").css("border","2px solid #5F6161"),$(".css-1j1r6a0").html(c-1)):(a.attr("src",_stock_url),$("#stockpost").css("width","40px"),$(".css-1drc635").css("border","none"),"n"==_stockedid&&$(".css-1j1r6a0").html(c+1))}).fail(function(t,s,e){alert("Bài viết đã được lưu vào thư mục từ trước đó")})}else alert("Bài viết đã được lưu vào thư mục")}),$(document).on("click",".css-1duml6f #likepost",function(t){var s=$(this),e=$(this).prev(),a="";_notlike_url="/images/utils/like.svg",_liked_url="/images/utils/liked.svg",$(this).parents(".css-1duml6f").next().trigger("click"),e.prop("checked")?(e.attr("checked",!1),s.attr("src",_notlike_url)):(e.attr("checked",!0),a="checked",s.attr("src",_liked_url)),window.location.href.indexOf("posts")>-1?db="/likePost":db="/likeQuestion";$("#author").html(),e.attr("data-item");var c={atId:e.attr("data-atId"),itemId:e.attr("data-itemId"),check:a};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:db,dataType:"json",data:c}).done(function(t,s,e){let c=parseInt($(".css-8g69pl").html());"checked"==a?$(".css-8g69pl").html(c+1):$(".css-8g69pl").html(c-1)}).fail(function(t,s,e){})}),$(document).on("click",".css-1duml6f .likecomment",function(t){var s=$(this),e=$(this).prev(),a="";_notlike_url="/images/utils/like.svg",_liked_url="/images/utils/liked.svg",$(this).parents(".css-1duml6f").next().trigger("click"),e.prop("checked")?(e.attr("checked",!1),s.attr("src",_notlike_url)):(e.attr("checked",!0),a="checked",s.attr("src",_liked_url)),window.location.href.indexOf("posts")>-1?db="/likeComment":db="/likeAnswear";var c={atId:e.attr("data-atId"),itemId:e.attr("data-itemId"),check:a,commentId:e.attr("data-comid")};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:db,dataType:"json",data:c}).done(function(t,s,e){}).fail(function(t,s,e){})}),$(document).on("click",".css-1duml6f",function(t){$(".st-Modal-login")&&$(".st-Modal-login").addClass("is-open")}),$(document).on("click","#stockpost",function(t){$(".st-Modal-login")&&$(".st-Modal-login").addClass("is-open")}),jQuery(".code-copy-btn").click(function(){var t=$(this).siblings()[0].innerText;let s=$("<textarea></textarea>");s.text(t),$(this).append(s),s.select(),document.execCommand("copy"),s.remove(),$(this).text("Copied"),setTimeout(function(){$(".code-copy-btn").text("Copy")},2e3)}),$(document).on("click",".css-79elbk button",function(t){t.stopPropagation();let s=$(this).next();s.hasClass("css-l40u17")?(s.removeClass("css-l40u17"),s.addClass("css-1iynwv8")):(s.addClass("css-l40u17"),s.removeClass("css-1iynwv8"))}),$(document).on("click",".css-dfpqc0",function(t){let s=$(this).children(":nth-child(2)");s.hasClass("css-u4hpc5")?s.removeClass("css-u4hpc5").addClass("css-j1rs62"):s.addClass("css-u4hpc5").removeClass("css-j1rs62")}),$(document).on("click",function(t){null==t.target.closest(".css-dfpqc0")&&$(".css-dfpqc0").children(":nth-child(2)").addClass("css-u4hpc5").removeClass("css-j1rs62")}),$(document).on("click",".css-1iwvira",function(t){let s=$(this).closest("section.css-1q0wz2m");tmpHtml=$("#temcomment").html(),s.html(tmpHtml)}),$(document).on("click",".css-j1rs62 .css-1mcn277",function(t){let s=$(this),e=$(this).closest("section.css-1q0wz2m"),a="";if(a=window.location.href.indexOf("posts")>-1?"comment":"answear",$(this).hasClass("copy")){text=s.attr("data-link");let t=$("<textarea></textarea>");t.text(text),$(this).append(t),t.select(),document.execCommand("copy"),t.remove()}else if($(this).hasClass("edit")){let t=e.html();$("#temcomment").html(t);var c={type:a,caId:s.attr("data-caId")};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:"/findItem",dataType:"json",data:c}).done(function(t,s,a){$itemid=t.aa.post_id?t.aa.post_id:t.aa.question_id,temp='<div><div class="css-1eb4shr e1kr2j5i0">    <img class="css-100alwu eyfquo10" onerror="this.src =\'https://secure.gravatar.com/avatar/c2df0d82abc13bc84a3bb4eb7e5386d1\';" src="/storage/'+t.profile_photo_path+'" loading="lazy" width="36" height="36">    <span class="css-y8vo6o e1kr2j5i1">Đăng bình luận </span></div><div class="css-1fnrshs e1kr2j5i2">    <div class="css-k008qs e1kr2j5i3">        <div class="css-1w8dyws e1kr2j5i4">Nội dung</div>        <div class="css-1kbv4lt e1kr2j5i4">Xem trước</div></div></div><div class="css-ee6kxn e1kr2j5i10">        <textarea name="update" placeholder="Nhập bình luận" class="css-ty7eka e1kr2j5i12" style="overflow: hidden scroll; overflow-wrap: break-word; resize: none; height: 100px;">'+t.aa.editor+'</textarea>        <div class="co-Item_text css-5ldyj5 e1kr2j5i11" id="comment_content comment_block update" style="margin-bottom: 0px; display: none;"><div class="co-Item_text"></div>    </div></div><div class="css-1hbfboa e1kr2j5i13">    <div class="css-18fgn0k e1kr2j5i14" style=""><span class="css-hlm1x e1kr2j5i15"><i class="fa fa-picture-o"></i>Chọn ảnh</span>    </div><div><button class="css-1iwvira e1rb7ucl0" font-size="14" style="margin-left: auto;">Huỷ<button data-itemid="'+$itemid+'" data-action = "update" data-caId="'+t.aa.id+'" class="css-qgrf2v e1rb7ucl0" font-size="14" style="margin-left: auto;">Đăng</button></div></div><input type="file" style="display: none;"></div>',e.html(temp)}).fail(function(t,s,e){})}else if($(this).hasClass("delete")){if(1!=confirm("Bạn có chắc chắn xóa? Nội dung bị xóa sẽ không thể phục hồi"))return;c={type:a,caId:s.attr("data-caId"),itemId:$("button.deletebtn").attr("data-itemId"),atId:$("button.deletebtn").attr("data-atId")};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:"/deleteItem",dataType:"json",data:c}).done(function(t,s,a){e.remove()}).fail(function(t,s,e){})}}),$(document).on("click","button.deletebtn",function(t){var s={type:$(this).attr("data-type"),itemId:$("button.deletebtn").attr("data-itemId"),paId:"",atId:$("button.deletebtn").attr("data-atId")};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:"/deleteItem",dataType:"json",data:s}).done(function(t,s,e){window.location.href="/"}).fail(function(t,s,e){})}),$(document).on("click","button.deletedraft",function(t){if(1==confirm("Bạn có chắc chắn xóa bản nháp? Nội dung bản nháp sẽ không thể phục hồi")){let t=$(this);var s={type:t.attr("data-type"),itemId:t.attr("data-itemId"),paId:"",atId:t.attr("data-atId")};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:"/deleteItem",dataType:"json",data:s}).done(function(t,s,e){window.location.href="/drafts"}).fail(function(t,s,e){})}}),$(document).on("click","button.css-1nt9rv7",function(t){t.stopPropagation();let s=$(this);if(s.hasClass("deleteitem"))$(".deleleItem").addClass("is-open"),$(".css-79elbk button").next().addClass("css-l40u17").removeClass("css-1iynwv8");else if(s.hasClass("report")){let t=$(this).parent(".css-1iynwv8").next();$(this).hasClass("css-1nt9rv7")&&t.addClass("is-open")}else s.hasClass("publish")&&(window.location.href="/publish?item="+$(this).attr("data-item"))}),$(document).on("click",function(t){null==t.target.closest(".css-79elbk")&&(el=$(".css-79elbk button").next(),el.addClass("css-l40u17"),el.removeClass("css-1iynwv8"))}),$(document).on("click",".css-yxsgo ul li",function(t){var s={item:$(this).attr("data-item"),type:$(this).attr("data-type")};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"drafts/content",data:s,type:"post",success:function(t){$(".css-1cwgncl").html(t)}})}),$(document).on("click","span.css-hlm1x",function(t){var s;$("#image").trigger("click"),$("#image").on("change",function(t){$("#upload_image").submit(function(t){t.preventDefault(),s||(s=$.ajax({url:"/save",type:"POST",dataType:"JSON",data:new FormData(this),processData:!1,contentType:!1,success:function(t,s){$("#upload_image")[0].reset();var e=t.img[1].replace("public","rongvangit.com/storage"),a="!["+t.img[0]+"]("+e+")",c=document.getElementById("comment_block").selectionStart,n=$("textarea").val(),o=n.slice(0,c),i=n.slice(c);$("textarea").val(o+a+i)},error:function(t,s,e){}}))}),$("#upload_image").submit()})}),$(document).on("click","button.code-copy-btn",function(t){var s=$(this).siblings()[0].innerText;let e=$("<textarea></textarea>");e.text(s),$(this).append(e),e.select(),document.execCommand("copy"),e.remove(),$(this).text("Copied"),setTimeout(function(){$(".code-copy-btn").text("Copy")},2e3)});